---
import linearIcon from "../../../src/ui/icons/linear.svg?raw";
import jiraIcon from "../../../src/ui/icons/jira.svg?raw";
import claudeIcon from "../../../src/ui/icons/claude.svg?raw";
import codexIcon from "../../../src/ui/icons/codex.svg?raw";
import geminiIcon from "../../../src/ui/icons/gemini.svg?raw";

const chapters = [
  {
    title: "Task-Driven Development",
    icon: `<svg width="34" height="34" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg>`,
    color: "#34d399",
    intro:
      "Everything starts with a real task. You define the work, and agents take care of execution with the context they need.",
    details: [
      {
        title: "You create tasks, agents execute them.",
        context:
          "Your team sets priorities and intent, then OpenKit converts that into a clear execution queue so agents can keep moving without constant manual steering or repeated handoffs.",
      },
      {
        title: "Connect Jira, Linear, and local tasks in one flow.",
        context:
          "External trackers and local tasks are handled consistently, so intake feels unified instead of split across tools, and teams can route work the same way regardless of source.",
      },
      {
        title: "Task details, comments, and attachments are saved locally.",
        context:
          "Agents can use relevant context directly from local project data, including ticket updates over time, which reduces manual copy/paste and keeps execution stable as requirements evolve.",
      },
      {
        title: "AI-targeted context and todos come first.",
        context:
          "You can add local instructions and task-specific todos for agents, and that guidance is prioritized during execution so work stays aligned with your teamâ€™s real implementation expectations.",
      },
    ],
  },
  {
    title: "Isolated Environments",
    icon: `<svg width="34" height="34" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M16 3h5v5"/><path d="M8 3H3v5"/><path d="M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3"/><path d="m15 9 6-6"/></svg>`,
    color: "#38bdf8",
    intro:
      "Each task gets its own environment so agents can run in parallel without stepping on each other.",
    details: [
      {
        title: "Each task gets a separate environment.",
        context:
          "Work for one task does not leak into another, so you can run multiple streams in parallel with clean boundaries and review outcomes independently before merging.",
      },
      {
        title: "Agents stay fully isolated from each other.",
        context:
          "Every agent operates independently in its own workspace, avoiding collisions in code changes, process state, and runtime behavior even when several agents are active at once.",
      },
      {
        title: "Built on Git worktrees under the hood.",
        context:
          "OpenKit uses native Git worktree mechanics to keep task branches physically separated while still tied to the same repository, making it easy to inspect and compare parallel work.",
      },
      {
        title: "Independent runtime with automatic port conflict resolution.",
        context:
          "Each environment can run on its own, with port offsets applied automatically so parallel servers do not conflict and each task remains runnable without manual port debugging.",
      },
    ],
  },
  {
    title: "Agent Tooling Hub",
    icon: `<svg width="34" height="34" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 8V4H8"/><rect width="16" height="12" x="4" y="8" rx="2"/><path d="M2 14h2"/><path d="M20 14h2"/><path d="M15 13v2"/><path d="M9 13v2"/></svg>`,
    color: "#818cf8",
    intro:
      "Bring your AI stack under one roof with a centralized way to manage tooling across all projects.",
    details: [
      {
        title: "Centralized AI tooling across projects.",
        context:
          "Manage how your agents are equipped from one place instead of repeating setup in every repo.",
      },
      {
        title: "No more proprietary agent silos.",
        context:
          "Tooling and workflow configuration stop living in isolated agent-specific pockets and become reusable across your stack.",
      },
      {
        title: "Automatic device-wide tool discovery.",
        context:
          "OpenKit scans what is already installed and helps you bring it into a single managed workflow quickly.",
      },
      {
        title: "Hooks at defined workflow checkpoints.",
        context:
          "Agents can run configured checks at specific stages, so outcomes stay more predictable and stable from task start to delivery.",
      },
    ],
  },
  {
    title: "Real-Time Visibility",
    icon: `<svg width="34" height="34" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"/></svg>`,
    color: "#f59e0b",
    intro:
      "Follow the path from ticket to pull request in real time, and step in only when human input is needed.",
    details: [
      {
        title: "Live activity feed for all agents in one place.",
        context:
          "You can track concurrent workstreams without switching views, so status stays visible as execution scales.",
      },
      {
        title: "High-signal notifications for blockers and approvals.",
        context:
          "Important events are surfaced when attention is required, reducing noise while keeping critical moments clear.",
      },
      {
        title: "Readable progress at high concurrency.",
        context:
          "Even with many active agents, activity remains understandable so teams can make quick decisions with confidence.",
      },
    ],
  },
];
---

<div class="section-divider"></div>
<section id="features">
  <div class="container">
    <div class="section-route-icon fade-in" aria-hidden="true">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="6" cy="19" r="3"></circle>
        <path d="M9 19h8.5a3.5 3.5 0 0 0 0-7H15"></path>
        <circle cx="18" cy="5" r="3"></circle>
        <path d="M15 5H6.5a3.5 3.5 0 0 0 0 7H9"></path>
      </svg>
    </div>
    <h2 class="section-title fade-in">From ticket to pull request. Autonomous.</h2>
    <p class="section-sub fade-in" data-delay="80">
      A continuous story: capture work, execute in isolation, coordinate tooling, and ship with visibility and confidence.
    </p>
    <div class="flow-strip fade-in" data-delay="120" aria-label="Issue tracker to deployment flow">
      <ol class="flow-steps">
        <li class="step-issue" style="--flow-color: #60a5fa;">
          <span class="flow-icon">
            <span class="vendor-mark linear-mark" aria-label="Linear" set:html={linearIcon}></span>
            <span class="vendor-mark jira-mark" aria-label="Jira" set:html={jiraIcon}></span>
          </span>
          <span class="flow-stop"></span>
          <strong>Issue Tracker</strong>
        </li>
        <li class="step-agents" style="--flow-color: #a78bfa;">
          <span class="flow-icon">
            <span class="vendor-mark codex-mark" aria-label="OpenAI Codex" set:html={codexIcon}></span>
            <span class="vendor-mark claude-mark" aria-label="Claude" set:html={claudeIcon}></span>
            <span class="vendor-mark gemini-mark" aria-label="Gemini" set:html={geminiIcon}></span>
          </span>
          <span class="flow-stop"></span>
          <strong>Agents</strong>
        </li>
        <li class="step-verify" style="--flow-color: #f59e0b;">
          <span class="flow-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
              <path
                d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"
                fill="currentColor"
                stroke="none"
              ></path>
              <path d="m9 12 2 2 4-4" stroke="var(--bg-page)" stroke-width="2.2"></path>
            </svg>
          </span>
          <span class="flow-stop"></span>
          <strong>Validation</strong>
        </li>
        <li class="step-shipped" style="--flow-color: #34d399;">
          <span class="flow-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="9" fill="currentColor" stroke="none"></circle>
              <path d="m8.3 12.2 2.5 2.5 4.9-4.9" stroke="var(--bg-page)" stroke-width="2.2"></path>
            </svg>
          </span>
          <span class="flow-stop"></span>
          <strong>Delivery</strong>
        </li>
      </ol>
    </div>

    <div class="story-flow">
      {
        chapters.map((chapter, i) => (
          <article
            class="story-chapter fade-in"
            data-delay={String(140 + i * 90)}
            style={`--chapter-color: ${chapter.color};`}
          >
            <div class="chapter-icon-wrap">
              <Fragment set:html={chapter.icon} />
            </div>
            <div class="chapter-content">
              <h3>{chapter.title}</h3>
              <p class="chapter-intro">{chapter.intro}</p>
              <ul class="chapter-points">
                {chapter.details.map((detail) => (
                  <li>
                    <h4 class="chapter-point-title">{detail.title}</h4>
                    <p>{detail.context}</p>
                  </li>
                ))}
              </ul>
            </div>
          </article>
        ))
      }
    </div>
  </div>
</section>

<style>
  .section-route-icon {
    display: flex;
    justify-content: center;
    margin-bottom: 16px;
    color: color-mix(in srgb, var(--primary) 78%, #d1d5db 22%);
  }

  .section-route-icon :global(svg) {
    width: 28px;
    height: 28px;
    stroke-width: 1.7;
    filter: drop-shadow(0 0 14px color-mix(in srgb, var(--primary) 20%, transparent));
  }

  .section-title {
    font-size: 36px;
    text-align: center;
    margin-bottom: 12px;
  }

  .section-sub {
    font-size: 16px;
    color: var(--text-muted);
    text-align: center;
    margin-bottom: 92px;
    max-width: 680px;
    margin-left: auto;
    margin-right: auto;
    line-height: 1.6;
  }

  .flow-strip {
    position: relative;
    margin: 0 auto 84px;
    max-width: 840px;
    padding: 0 4px;
  }

  .flow-strip::before {
    content: "";
    position: absolute;
    left: 9%;
    right: 9%;
    top: 64px;
    height: 1px;
    background: rgba(209, 213, 219, 0.62);
    opacity: 1;
    z-index: 0;
  }

  .flow-strip::after {
    content: none;
  }

  .flow-steps {
    position: relative;
    z-index: 1;
    list-style: none;
    margin: 0;
    padding: 0;
    display: grid;
    grid-template-columns: repeat(4, minmax(0, 1fr));
    gap: 10px;
  }

  .flow-steps li {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    color: var(--text-primary);
  }

  .flow-stop {
    display: inline-block;
    width: 8px;
    height: 8px;
    border-radius: 999px;
    background: #d1d5db;
    border: 0;
    box-shadow: 0 0 0 7px var(--bg-page);
    margin-bottom: 12px;
    z-index: 2;
    order: 2;
  }

  .flow-icon {
    position: relative;
    width: 48px;
    height: 52px;
    margin: 0 auto 10px;
    border-radius: 50%;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    color: var(--flow-color);
    background: transparent;
    box-shadow: none;
    order: 1;
  }

  .flow-icon::before {
    content: none;
  }

  .flow-icon :global(svg) {
    width: 24px;
    height: 24px;
    stroke-width: 1.7;
  }

  .step-issue .flow-icon {
    width: 84px;
    gap: 8px;
    color: inherit;
  }

  .step-agents .flow-icon {
    width: 104px;
    gap: 8px;
    color: inherit;
  }

  .step-verify .flow-icon,
  .step-verify .flow-stop {
    color: #f59e0b;
    --flow-color: #f59e0b;
  }

  .step-shipped .flow-icon,
  .step-shipped .flow-stop {
    color: #34d399;
    --flow-color: #34d399;
  }

  .step-verify .flow-icon :global(svg),
  .step-shipped .flow-icon :global(svg) {
    width: 30px;
    height: 30px;
  }

  .step-verify .flow-icon,
  .step-shipped .flow-icon {
    width: 52px;
  }

  .vendor-mark {
    width: 26px;
    height: 26px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    color: currentColor;
  }

  .linear-mark {
    color: #5e6ad2;
  }

  .jira-mark {
    color: #2684ff;
  }

  .claude-mark {
    color: #d97757;
  }

  .codex-mark {
    color: #ffffff;
  }

  .codex-mark :global(svg),
  .codex-mark :global(path) {
    color: #ffffff !important;
    fill: #ffffff !important;
    stroke: #ffffff !important;
  }

  .gemini-mark {
    color: #8b7bff;
  }

  .vendor-mark :global(svg) {
    width: 100%;
    height: 100%;
  }

  .step-agents .vendor-mark {
    opacity: 0.95;
  }

  .flow-steps strong {
    display: block;
    font-size: 14px;
    line-height: 1.35;
    letter-spacing: 0.005em;
    font-weight: 500;
    order: 3;
  }

  .story-flow {
    --story-gap: 264px;
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--story-gap);
    margin-top: 240px;
  }

  .story-chapter {
    position: relative;
    display: grid;
    grid-template-columns: 120px 1fr;
    gap: 24px;
    align-items: flex-start;
    padding: 0;
    margin: 0;
  }

  .story-chapter::after {
    content: "";
    position: absolute;
    left: 50%;
    bottom: calc(var(--story-gap) / -2);
    width: 100%;
    max-width: 600px;
    height: 1px;
    transform: translateX(-50%);
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(45, 212, 191, 0.15) 20%,
      rgba(45, 212, 191, 0.25) 50%,
      rgba(45, 212, 191, 0.15) 80%,
      transparent 100%
    );
  }

  .story-chapter:last-child::after {
    display: none;
  }

  .chapter-icon-wrap {
    position: sticky;
    top: calc(var(--nav-height) + 18px);
    display: flex;
    align-items: center;
    justify-content: center;
    width: 220px;
    height: 220px;
    color: var(--chapter-color);
    isolation: isolate;
    transform: translate(-78px, -40px);
  }

  .chapter-icon-wrap::before {
    content: "";
    position: absolute;
    inset: -78px;
    border-radius: 50%;
    background:
      radial-gradient(
        circle at 36% 48%,
        color-mix(in srgb, var(--chapter-color) 28%, transparent) 0%,
        color-mix(in srgb, var(--chapter-color) 18%, transparent) 24%,
        color-mix(in srgb, var(--chapter-color) 10%, transparent) 44%,
        color-mix(in srgb, var(--chapter-color) 5%, transparent) 64%,
        color-mix(in srgb, var(--chapter-color) 2%, transparent) 78%,
        transparent 100%
      );
    filter: blur(48px);
    opacity: 0.5;
    z-index: 0;
    pointer-events: none;
  }

  .chapter-icon-wrap :global(svg) {
    position: relative;
    z-index: 1;
    width: 124px;
    height: 124px;
    stroke-width: 1.45;
    filter: drop-shadow(0 0 16px color-mix(in srgb, var(--chapter-color) 18%, transparent));
  }

  .story-chapter:nth-child(2) .chapter-icon-wrap :global(svg),
  .story-chapter:nth-child(4) .chapter-icon-wrap :global(svg) {
    width: 108px;
    height: 108px;
  }

  .chapter-content h3 {
    font-size: 31px;
    line-height: 1.12;
    letter-spacing: -0.03em;
    margin-bottom: 12px;
  }

  .chapter-content {
    position: relative;
    z-index: 1;
  }

  .chapter-intro {
    font-size: 17px;
    color: var(--text-secondary);
    line-height: 1.75;
    margin-bottom: 38px;
    max-width: 920px;
  }

  .chapter-points {
    list-style: none;
    padding: 0;
    margin: 0;
    display: grid;
    gap: 16px;
  }

  .chapter-points li {
    margin: 0;
  }

  .chapter-point-title {
    margin: 0;
    position: relative;
    padding-left: 18px;
    color: var(--text-primary);
    font-size: 16px;
    line-height: 1.45;
    font-weight: 500;
  }

  .chapter-point-title::before {
    content: "";
    position: absolute;
    left: 4px;
    top: 9px;
    width: 5px;
    height: 5px;
    border-radius: 50%;
    background: color-mix(in srgb, var(--chapter-color) 75%, transparent);
  }

  .chapter-points p {
    margin: 8px 0 0;
    padding-left: 18px;
    color: var(--text-muted);
    font-size: 15px;
    line-height: 1.65;
    opacity: 0.9;
  }

  @media (max-width: 900px) {
    .flow-strip::before {
      left: 6%;
      right: 6%;
    }

    .flow-steps strong {
      font-size: 13px;
    }

    .chapter-content h3 {
      font-size: 28px;
    }
  }

  @media (max-width: 768px) {
    .flow-strip {
      --rail-gap: 20px;
      --rail-center: 50%;
      margin-bottom: 56px;
      width: 100%;
      margin-left: auto;
      margin-right: auto;
      padding-left: 0;
    }

    .flow-strip::before {
      left: var(--rail-center);
      right: auto;
      top: 26px;
      width: 2px;
      height: calc(100% - 48px);
      background: rgba(209, 213, 219, 0.62);
      transform: translateX(-1px);
    }

    .flow-strip::after {
      content: none;
    }

    .flow-steps {
      grid-template-columns: 1fr;
      gap: 20px;
      width: 100%;
    }

    .flow-steps li {
      position: relative;
      display: grid;
      grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
      align-items: center;
      column-gap: 0;
      min-height: 52px;
      transform: none;
      text-align: right;
      padding-left: 0;
    }

    .flow-stop {
      position: absolute;
      left: calc(var(--rail-center) + 2px);
      top: 50%;
      transform: translate(-50%, -50%);
      margin: 0;
    }

    .flow-icon {
      width: auto;
      min-width: 40px;
      height: 40px;
      margin: 0;
      gap: 6px;
      grid-column: 2;
      justify-self: start;
      justify-content: flex-start;
      padding-left: var(--rail-gap);
    }

    .flow-icon :global(svg) {
      width: 21px;
      height: 21px;
    }

    .step-issue .flow-icon {
      width: auto;
      gap: 5px;
    }

    .step-agents .flow-icon {
      width: auto;
      gap: 5px;
    }

    .step-verify .flow-icon :global(svg),
    .step-shipped .flow-icon :global(svg) {
      transform: translateX(-2px);
    }

    .vendor-mark {
      width: 21px;
      height: 21px;
    }

    .flow-steps strong {
      margin: 0;
      grid-column: 1;
      justify-self: end;
      text-align: right;
      order: initial;
      padding-right: var(--rail-gap);
    }

    .story-flow {
      --story-gap: 108px;
      margin-top: 170px;
    }

    .story-chapter {
      grid-template-columns: 1fr;
      gap: 14px;
    }

    .story-chapter::after {
      display: none;
    }

    .chapter-icon-wrap {
      position: static;
      width: 128px;
      height: 128px;
      margin: 0 auto;
      transform: none;
    }

    .chapter-icon-wrap::before {
      inset: -24px;
      background:
        radial-gradient(
          circle at 50% 34%,
          color-mix(in srgb, var(--chapter-color) 28%, transparent) 0%,
          color-mix(in srgb, var(--chapter-color) 18%, transparent) 24%,
          color-mix(in srgb, var(--chapter-color) 10%, transparent) 44%,
          color-mix(in srgb, var(--chapter-color) 5%, transparent) 64%,
          color-mix(in srgb, var(--chapter-color) 2%, transparent) 78%,
          transparent 100%
        );
    }

    .chapter-icon-wrap :global(svg) {
      width: 72px;
      height: 72px;
    }

    .story-chapter:nth-child(2) .chapter-icon-wrap :global(svg),
    .story-chapter:nth-child(4) .chapter-icon-wrap :global(svg) {
      width: 64px;
      height: 64px;
    }

    .chapter-content {
      text-align: left;
    }

    .chapter-content h3,
    .chapter-intro {
      text-align: center;
      margin-left: auto;
      margin-right: auto;
    }

    .chapter-points,
    .chapter-points li,
    .chapter-point-title,
    .chapter-points p {
      text-align: left;
    }

    .chapter-content h3 {
      font-size: 24px;
    }

    .chapter-intro {
      font-size: 16px;
    }
  }

  @media (max-width: 640px) {
    .section-title {
      font-size: 28px;
    }

    .section-sub {
      margin-bottom: 40px;
      font-size: 15px;
    }
  }
</style>
